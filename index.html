<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransUnidos | Centro de Mando</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- 1. PANTALLA DE LOGIN -->
    <div class="login-split-container" id="login-view">
        <div class="login-media-side">
            <video autoplay muted loop playsinline><source src="assets/video_inicial.mp4" type="video/mp4"></video>
            <div class="video-overlay">
                <div class="floating-brand-container">
                    <img src="assets/Logo.png" class="logo-float">
                    <div class="brand-text-login">
                        <h2>Log칤stica Inteligente</h2>
                        <p>Centro de Mando TransUnidos Corp.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="login-form-side">
            <div class="login-card-clean">
                <div class="logo-circle-container"><img src="assets/Logo.png"></div>
                <h2>Acceso Seguro</h2>
                <p class="subtitle">Ingresa tus credenciales corporativas.</p>
                <form id="login-form">
                    <div class="input-group">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" id="email" placeholder="Correo Corporativo" required>
                    </div>
                    <div class="input-group">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" id="password" placeholder="Contrase침a" required>
                    </div>
                    <button type="submit" id="btn-login">INGRESAR <i class="fa-solid fa-arrow-right"></i></button>
                    <p id="feedback-msg" class="feedback"></p>
                </form>
            </div>
        </div>
    </div>

    <!-- 2. DASHBOARD SPA -->
    <div class="dashboard-wrapper hidden" id="dashboard-view">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="assets/Logo.png" class="sidebar-logo">
                <span>TransUnidos</span>
            </div>
            
            <nav class="sidebar-nav">
                <a href="javascript:void(0)" onclick="switchTab('inicio')" class="nav-item active" id="nav-inicio">
                    <i class="fa-solid fa-house"></i> Inicio
                </a>
                <a href="javascript:void(0)" onclick="switchTab('rodamientos')" class="nav-item" id="nav-rodamientos">
                    <i class="fa-solid fa-calendar-days"></i> Rodamientos
                </a>
                <a href="javascript:void(0)" onclick="switchTab('monitoreo')" class="nav-item" id="nav-monitoreo">
                    <i class="fa-solid fa-location-dot"></i> Monitoreo GPS
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-pill">
                    <div class="user-data">
                        <p id="user-name-display">Usuario</p>
                        <small id="user-role-display">Rol</small>
                    </div>
                    <button onclick="logout()" class="btn-logout-pro"><i class="fa-solid fa-power-off"></i></button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- SECCI칍N INICIO: CARRUSEL 100% ALTO -->
            <section id="section-inicio" class="content-section">
                <div class="hero-carousel">
                    <div class="carousel-container">
                        <div class="slide active">
                            <img src="assets/imagen1.png">
                            <div class="slide-info"><h2>Bienvenidos</h2><p>Al Ecosistema Digital de TransUnidos Corp.</p></div>
                        </div>
                        <div class="slide">
                            <img src="assets/imagen2.png">
                            <div class="slide-info"><h2>Gesti칩n Operativa Inteligente</h2><p>Control de despachos por Rodamiento TU.</p></div>
                        </div>
                        <div class="slide">
                            <img src="assets/imagen3.png">
                            <div class="slide-info"><h2>Flota Vans</h2><p>Servicios vehiculares directos.</p></div>
                        </div>
                        <div class="slide">
                            <img src="assets/imagen4.png">
                            <div class="slide-info"><h2>Flota Bus</h2><p>Transporte intermunicipal de pasajeros y encomiendas.</p></div>
                        </div>
                        <div class="slide">
                            <img src="assets/imagen5.png">
                            <div class="slide-info"><h2>Seguridad Satelital</h2><p>Monitoreo GPS protegido Wialon.</p></div>
                        </div>
                    </div>
                    <div class="carousel-dots">
                        <span class="dot active"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </div>
                </div>
            </section>

            <!-- SECCI칍N RODAMIENTOS: VIDEOS -->
            <section id="section-rodamientos" class="content-section hidden">
                <div class="section-container">
                    <h2 class="title">游늰 Gesti칩n del Rodamiento TransUnidos Corp.</h2>
                    <div class="video-grid">
                        <div class="video-card">
                            <video autoplay muted loop><source src="assets/mando_semanal.mp4"></video>
                            <div class="card-body"><h3>  </h3><a href="https://script.google.com/macros/s/AKfycbwRSjW0AVGgn9CqgJ7cfqeCmxZ3o5pwZ_UvUbsD4JCIWU_SyhpZBM5wgsIyN3-9kXWB/exec" target="_blank" class="btn-go">游릭Centro de Mando Semanal</a></div>
                        </div>
                        <div class="video-card">
                            <video autoplay muted loop><source src="assets/mando_dominical.mp4"></video>
                            <div class="card-body"><h3>  </h3><a href="https://script.google.com/macros/s/AKfycbzJE20RotviDMSDDJZcKS3-5PMdMl5YYJn3nSvSLTb1tOAqTa0vQZ3HrXp2R0Of2gXA/exec" target="_blank" class="btn-go"> 游Centro de Mando Dominical</a></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECCI칍N GPS: VIDEOS + SEGURIDAD -->
            <section id="section-monitoreo" class="content-section hidden">
                <div class="section-container">
                    <h2 class="title">游늸 Monitoreo GPS Wialon de TransUnidos Corp.</h2>
                    <div class="video-grid">
                        <div class="video-card">
                            <video autoplay muted loop><source src="assets/gps_rionegro.mp4"></video>
                            <div class="card-body"><h3> </h3><button onclick="abrirModalGps('https://norbeyorozco27.github.io/nimbus-prueba-2/')" class="btn-go">游리Rionegro</button></div>
                        </div>
                        <div class="video-card">
                            <video autoplay muted loop><source src="assets/gps_norte.mp4"></video>
                            <div class="card-body"><h3> </h3><button onclick="abrirModalGps('https://norbeyorozco27.github.io/Medellin-Sur/')" class="btn-go">游댯Medell칤n Norte</button></div>
                        </div>
                        <div class="video-card">
                            <video autoplay muted loop><source src="assets/gps_sur.mp4"></video>
                            <div class="card-body"><h3> </h3><button onclick="abrirModalGps('https://norbeyorozco27.github.io/Medellin-Norte/')" class="btn-go">游댮Medell칤n Sur</button></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- MODAL SEGURIDAD -->
    <div id="gps-lock-modal" class="modal-overlay hidden">
        <div class="modal-card">
            <i class="fa-solid fa-user-shield"></i>
            <h3>Validar Identidad</h3>
            <p>Ingresa tu contrase침a para visualizar el GPS.</p>
            <input type="password" id="gps-pass" placeholder="Contrase침a">
            <p id="gps-err" class="error-msg"></p>
            <div class="modal-btns">
                <button onclick="cerrarModalGps()" class="btn-cancel">Cancelar</button>
                <button onclick="validarGps()" class="btn-confirm">Verificar</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>